# Experiment 7 (Cilantro Experiment)

For this experiment, the workload generated by the load generators will replicate the workload stressing the microservice applications running with Cilantro. According to Cilantro paper, they used HotelReservation microservice application, and they ran the query workload in the https://dl.acm.org/doi/10.1145/3297858.3304013 paper.

Cilantro paper: https://www.usenix.org/conference/nsdi23/presentation/karthikeyan

## Purpose of this experiment
Cilantro paper was accepted in OSDI'23, and they used wrk2 load generators to verify their autoscaler. However, depending on the previous experiment results, wrk2 and other load generators can give wrong results, and this puts the reliability of Cilantro into question.

## Experiment design
Cilantro was run on a 160 CPU cluster with 20 AWS m5.2xlarge instances. According to https://aws.amazon.com/ec2/instance-types/m5/, AWS m5.2xlarge instances have 8 vCPUs, 32 GiB of Memory, and up to 10 Gbps of Network bandwidth. This can be recreated using 10 machines of Cloudlab Clemson c6220 machines (where each machine has 16 cores and 64 GB memory).

The client machine will be separate from the server machines, but will be in the same cluster as the server machines to reduce propagation delay.

## Setting up machines
For multiple machines, kubeadm will be used to create the multiple machine kubernetes cluster. 

## Load Generation
Regarding the wrk2 family workload generators, we will run the proposed experiments mentioned in the paper. We will also use the other load generators to see whether the load generation from the other load generators will produce the same configurations or not. If it happens to be such that at least one load generator is leading to configurations that are not only very different, but also have the server perform better, this puts the validity of SelfTune into question.